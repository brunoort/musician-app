{"ast":null,"code":"import _objectSpread from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/brunoortiz/Desktop/Projetos/musician-app/client/src/components/MusiciansAdmin.js\";\nimport React, { Component, Fragment } from 'react';\nimport Musician from './Musician';\nimport axios from \"axios\";\n\nvar MusiciansAdmin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MusiciansAdmin, _Component);\n\n  function MusiciansAdmin() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MusiciansAdmin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MusiciansAdmin)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      newmusician: {\n        firstName: \"\",\n        lastName: \"\",\n        genre: \"\"\n      },\n      musicians: []\n    };\n    _this.outputHTML = \"\";\n\n    _this.handleAddMusician =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(id, event) {\n        var url, http, options, req;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                url = \"https://jarcakr0yd.execute-api.us-east-1.amazonaws.com/default/MusicanaApp\";\n                http = require('http');\n                options = {\n                  host: url\n                };\n                req = http.get(options, function (res) {\n                  console.log(res);\n                });\n                _context.next = 8;\n                return axios.put(\"/musician/\".concat(id), _this.state.newmusician);\n\n              case 8:\n                _this.setState({\n                  musicians: [].concat(_toConsumableArray(_this.state.musicians), [_this.state.newmusician])\n                });\n\n                _this.setState({\n                  newmusician: {\n                    \"firstName\": \"\",\n                    \"lastName\": \"\",\n                    \"genre\": \"\"\n                  }\n                });\n\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 12]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleUpdateMusician = function (id, name) {\n      // add call to AWS API Gateway update musician endpoint here\n      var musicianToUpdate = _toConsumableArray(_this.state.musicians).find(function (musician) {\n        return musician.id === id;\n      });\n\n      var updatedMusicians = _toConsumableArray(_this.state.musicians).filter(function (musician) {\n        return musician.id !== id;\n      });\n\n      musicianToUpdate.musicianname = name;\n      updatedMusicians.push(musicianToUpdate);\n\n      _this.setState({\n        musicians: updatedMusicians\n      });\n    };\n\n    _this.handleDeleteMusician =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(id, event) {\n        var updatedMusicians;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                // using firstName as the id in musicians state\n                event.preventDefault();\n                _context2.prev = 1;\n                _context2.next = 4;\n                return axios.delete(\"/musician/\".concat(id));\n\n              case 4:\n                _context2.next = 6;\n                return _toConsumableArray(_this.state.musicians).filter(function (musician) {\n                  return musician.firstName.toLowerCase() !== id;\n                });\n\n              case 6:\n                updatedMusicians = _context2.sent;\n\n                _this.setState({\n                  musicians: updatedMusicians\n                });\n\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 10]]);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.fetchMusicians =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var res, allMusicians;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.prev = 0;\n              _context3.next = 3;\n              return axios.get('/musician/all');\n\n            case 3:\n              res = _context3.sent;\n              allMusicians = Object.keys(res.data).map(function (key) {\n                return res.data[key];\n              });\n\n              _this.setState({\n                musicians: _toConsumableArray(allMusicians)\n              });\n\n              _context3.next = 11;\n              break;\n\n            case 8:\n              _context3.prev = 8;\n              _context3.t0 = _context3[\"catch\"](0);\n              console.log(_context3.t0);\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, null, [[0, 8]]);\n    }));\n\n    _this.onAddMusicianFirstNameChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"firstName\": event.target.value\n        })\n      });\n    };\n\n    _this.onAddMusicianLastNameChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"lastName\": event.target.value\n        })\n      });\n    };\n\n    _this.onAddMusicianGenreChange = function (event) {\n      return _this.setState({\n        newmusician: _objectSpread({}, _this.state.newmusician, {\n          \"genre\": event.target.value\n        })\n      });\n    };\n\n    _this.componentDidMount = function () {\n      _this.fetchMusicians();\n    };\n\n    return _this;\n  }\n\n  _createClass(MusiciansAdmin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"subtitle is-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"Add and remove musicians using the form below:\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"column is-one-third\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: function onSubmit(event) {\n          return _this2.handleAddMusician(_this2.state.newmusician.firstName.toLowerCase(), event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter first name\",\n        value: this.state.newmusician.firstName,\n        onChange: this.onAddMusicianFirstNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter last name\",\n        value: this.state.newmusician.lastName,\n        onChange: this.onAddMusicianLastNameChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"input is-medium\",\n        type: \"text\",\n        placeholder: \"Enter genre\",\n        value: this.state.newmusician.genre,\n        onChange: this.onAddMusicianGenreChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"field\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"control\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"button is-primary is-medium\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Add musician\"))))), React.createElement(\"div\", {\n        className: \"column is-two-thirds\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.musicians.map(function (musician, index) {\n        return React.createElement(Musician, {\n          isAdmin: true,\n          handleUpdateMusician: _this2.handleUpdateMusician,\n          handleDeleteMusician: _this2.handleDeleteMusician,\n          firstname: musician.firstName,\n          lastname: musician.lastName,\n          genre: musician.genre,\n          key: musician.lastName.toLowerCase(),\n          id: musician.firstName.toLowerCase(),\n          index: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        });\n      }))))));\n    }\n  }]);\n\n  return MusiciansAdmin;\n}(Component);\n\nexport { MusiciansAdmin as default };","map":{"version":3,"sources":["/Users/brunoortiz/Desktop/Projetos/musician-app/client/src/components/MusiciansAdmin.js"],"names":["React","Component","Fragment","Musician","axios","MusiciansAdmin","state","newmusician","firstName","lastName","genre","musicians","outputHTML","handleAddMusician","id","event","preventDefault","url","http","require","options","host","req","get","res","console","log","put","setState","handleUpdateMusician","name","musicianToUpdate","find","musician","updatedMusicians","filter","musicianname","push","handleDeleteMusician","delete","toLowerCase","fetchMusicians","allMusicians","Object","keys","data","map","key","onAddMusicianFirstNameChange","target","value","onAddMusicianLastNameChange","onAddMusicianGenreChange","componentDidMount","index"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react';\nimport Musician from './Musician';\nimport axios from \"axios\";\n\nexport default class MusiciansAdmin extends Component {\n  \n  state = {\n    newmusician: { \n      firstName: \"\",\n      lastName: \"\",\n      genre: \"\"\n    },\n    musicians: []\n  }\n  \n  \n  outputHTML = \"\";\n  \n  handleAddMusician = async(id, event) => {\n    event.preventDefault();\n    try {\n      \n      const url = `https://jarcakr0yd.execute-api.us-east-1.amazonaws.com/default/MusicanaApp`;\n      \n      var http = require('http');\n      var options = {\n        host: url\n      };\n      \n      var req = http.get(options, function(res) {\n        console.log(res);\n      });\n      \n      await axios.put(`/musician/${id}`, this.state.newmusician);\n      this.setState({ musicians: [...this.state.musicians, this.state.newmusician] });\n      this.setState({ newmusician: { \"firstName\": \"\", \"lastName\": \"\", \"genre\": \"\" }});\n    }catch(err) {\n      console.log(err);\n    }\n  }\n  \n  handleUpdateMusician = (id, name) => {\n    // add call to AWS API Gateway update musician endpoint here\n    const musicianToUpdate = [...this.state.musicians].find(musician => musician.id === id);\n    const updatedMusicians = [...this.state.musicians].filter(musician => musician.id !== id);\n    musicianToUpdate.musicianname = name;\n    updatedMusicians.push(musicianToUpdate);\n    this.setState({musicians: updatedMusicians});\n  }\n  \n  handleDeleteMusician = async(id, event) => {\n    // using firstName as the id in musicians state\n    event.preventDefault();\n    try {\n      await axios.delete(`/musician/${id}`);\n      const updatedMusicians = await [...this.state.musicians].filter(musician => musician.firstName.toLowerCase() !== id);\n      this.setState({musicians: updatedMusicians});\n    }catch(err) {\n      console.log(err);\n    }\n  }\n  \n  fetchMusicians = async() => {\n    try{\n      const res = await axios.get('/musician/all');\n      const allMusicians = Object.keys(res.data).map((key) => {\n        return res.data[key];\n      });\n      this.setState({ musicians: [...allMusicians] });\n    }catch(err) {\n      console.log(err);\n    }\n  }\n  \n  onAddMusicianFirstNameChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"firstName\": event.target.value } });\n  onAddMusicianLastNameChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"lastName\": event.target.value } });\n  onAddMusicianGenreChange = event => this.setState({ newmusician: { ...this.state.newmusician, \"genre\": event.target.value } });\n  \n  componentDidMount = () => {\n    this.fetchMusicians();\n  }\n  \n  render() {\n    return (\n      <Fragment>\n      <section className=\"section\">\n      <div className=\"container\">\n      <p className=\"subtitle is-5\">Add and remove musicians using the form below:</p>\n      <br />\n      <div className=\"columns\">\n      <div className=\"column is-one-third\">\n      <form onSubmit={event => this.handleAddMusician(this.state.newmusician.firstName.toLowerCase(), event)}>\n      <div className=\"field\">\n      <div className=\"control\">\n      <input \n      className=\"input is-medium\"\n      type=\"text\" \n      placeholder=\"Enter first name\"\n      value={this.state.newmusician.firstName}\n      onChange={this.onAddMusicianFirstNameChange}\n      />\n      </div>\n      </div>\n      <div className=\"field\">\n      <div className=\"control\">\n      <input \n      className=\"input is-medium\"\n      type=\"text\" \n      placeholder=\"Enter last name\"\n      value={this.state.newmusician.lastName}\n      onChange={this.onAddMusicianLastNameChange}\n      />\n      </div>\n      </div>\n      <div className=\"field\">\n      <div className=\"control\">\n      <input \n      className=\"input is-medium\"\n      type=\"text\" \n      placeholder=\"Enter genre\"\n      value={this.state.newmusician.genre}\n      onChange={this.onAddMusicianGenreChange}\n      />\n      </div>\n      </div>\n      <div className=\"field\">\n      <div className=\"control\">\n      <button type=\"submit\" className=\"button is-primary is-medium\">\n      Add musician\n      </button>\n      </div>\n      </div>\n      </form>\n      </div>\n      <div className=\"column is-two-thirds\">\n      {\n        this.state.musicians.map((musician, index) =>\n        <Musician\n        isAdmin={true}\n        handleUpdateMusician={this.handleUpdateMusician}\n        handleDeleteMusician={this.handleDeleteMusician}\n        firstname={musician.firstName}\n        lastname={musician.lastName}\n        genre={musician.genre}\n        key={musician.lastName.toLowerCase()}\n        id={musician.firstName.toLowerCase()}\n        index={index}\n        />\n        )}\n        </div>\n        </div>\n        </div>\n        </section>\n        </Fragment>\n        )\n      }\n    }\n    "]},"metadata":{},"sourceType":"module"}